{% extends "dataedit/filter.html" %}
{% load static %}
{% block title %} - {{schema}}{% endblock %}

{% block site-header %}
<div class="d-flex flex-row justify-content-center">
    <div class="">
        <link rel="stylesheet" href="{% static 'dataedit/data-list.css' %}">
        <i class="far fa-ruler"></i>
        <h2 class="site-header"><a href="/dataedit/schemas"><i class="fas fa-arrow-alt-circle-left "></i>Data categorie</a>: {{ schema }}</h2>
    </div>
</div>
<div class="d-flex flex-row justify-content-center ">
    <h3>Search & Filter</h3>
    <button type="button" 
    class="btn btn-outline-light" 
    data-toggle="popover" 
    data-trigger="focus" 
    title="How to use search and filter" 
    {% if not tables%}
    data-content="Use the Filters on Tags or try searching for text that may occur in table names or in metadata. If you filter for multiple Tags, only schemas containing tables with all filtered Tags will be displayed. To see all schemas and tables again use the reset filter button." 
    {% else %}
    data-content="Use the Filters on Tags or try searching for text that may occur in table names or in metadata."
    {% endif %}
    style="margin-left: 10px;">
        <i class="fas fa-info-circle" style="color: #3B77A0;"></i>
    </button>
</div>
<div class="d-flex flex-column justify-content-center table-search">
    <form action="{{ request.path }}" method="get" class="table-search-form">
        <h5>Text</h5>
        <div class="searchbox_container small ">
            <input type="text" name="query" placeholder="Search" value="{% firstof query '' %}" class="form-control table-search-form-text" />
        </div>
        {% load dataedit.taghandler %}
        {% get_tags None None None as all_tags %}
        <h5>Tags</h5>    
        <div id="tags">
            <div class="" style="display: flex; flex-flow: wrap; margin-bottom: 1em;">
                <select name="tags" class="form-control selectpicker table-search-form-text" multiple data-live-search="true"
                    title="Click and search all Tags..." data-style="btn-outline-primary" data-width="auto" data-selected-text-format="values" data-actions-box="true" iconBase="fa">
                    {% for t in all_tags %}
                    <option data-content='<i class="fa fa-circle" style="color: {{t.color}};"></i> {{ t.name }}' value="{{ t.id }}" {% if t.id in tags %}selected{% endif %}>
                        {{ t.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div style="padding-bottom: 15px;">
                <button type="submit" class="btn btn-success">
                    Apply Filters
                </button>
                <a class="btn btn-danger" href="{{ request.path }}">
                    Reset Filters
                </a>
            </div>
        </div>
    </form>
</div>
{% endblock site-header %}

{% block data_content %}
{% load dataedit.taghandler %}


{% endblock %}
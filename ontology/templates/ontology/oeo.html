{% extends "base/base.html" %}
{% load django_bootstrap5 %}
{% load ontology.rdf %}
{% load static %}

{% block site-header %}
    <div class="main-header">
        <h1 class="main-header__title">
            <img src="/static/img/welcome/OpenEnergyFamily_Logo_OpenEnergyOntology_icon.svg" width="16" height="16" alt="OEO">         
            Ontology
        </h1>
        <div class="main-header__wizard">
            <a href="/ontology/">Overview</a> / Open Energy Ontology
        </div>
    </div>

{% endblock site-header %}

{% block main-right-sidebar-content %}
<div class="container">
    <div class="row">
        <h3>View the oeo</h3>
    </div>
    <div class="row">
        <div class="col">
            <div class="btn-group float-end" role="group" aria-label="Basic example">
                <a class="btn btn-secondary" href="/ontology/{{ontology}}/BFO_0000001">
                    Browse oeo classes
                </a>
                <a class="btn btn-secondary" href="/viewer/oeo/">
                    Graphical oeo viewer
                </a>
            </div>
        </div>
    </div>
    <hr>
    <div class="row">
        <h3>Download the oeo</h3>
    </div>
    <div class="row">
        <div class="col">
            <a class="btn btn-secondary" href="https://github.com/OpenEnergyPlatform/ontology/releases" target="_blank">
                <i class="fas fa-external-link-alt"></i>
                Download release from GitHub.
            </a>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col">
            <a class="btn btn-secondary" href="/ontology/{{ontology}}/releases/oeo-full.owl">
                full-oeo-owl
            </a>
            <div class="btn-group float-end" role="group" aria-label="Basic example">
                {% for ex in main_module.extensions %}
                <a class="btn btn-secondary" href="/ontology/{{ontology}}/releases/{{main_module.name}}.{{ex}}">
                    {{ex}}
                </a>
                {% endfor %}
                <a class="btn btn-secondary" href="/ontology/{{ontology}}/releases/oeo-closure.owl">
                    closure
                </a>
            </div>
        </div>
    </div>
    <div class="row">
        <h1>Welcome to Your SPA</h1>
        <div id="updateable-content">
            <!-- Content that will be updated -->
        </div>
        <button hx-get="{% url 'partial-page-content' %}" hx-swap="outerHTML" hx-target="#content" id="content">Update Content</button>
        <!-- Add other htmx-enabled elements as needed -->
    </div>
    <hr>
</div>

{% endblock main-right-sidebar-content %}

{% block main-content-body %}
 
<div hx-get="{% url 'partial-page-content' %}" hx-swap="outerHTML" hx-target="#content" hx-trigger="load" id="content">


</div>



<script src="https://unpkg.com/htmx.org@1.7.0/dist/htmx.js"></script>

<!-- Define a loading spinner (you can replace this with your preferred spinner) -->
<div id="loading-spinner" style="display: none;">
    Loading...
</div>

<script>
    document.addEventListener('htmx:beforeRequest', function (event) {
        document.getElementById('loading-spinner').style.display = 'block';
    });

    document.addEventListener('htmx:afterSwap', function (event) {
        document.getElementById('loading-spinner').style.display = 'none';
    });

    // Optionally, you can use this event to handle errors
    document.addEventListener('htmx:afterRequest', function (event) {
        if (event.detail.xhr.status >= 400) {
            console.error('Request failed:', event.detail.xhr);
        }
    });
</script>

{% endblock %}
